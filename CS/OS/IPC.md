# IPC (Inter Process Communication)

프로세스는 독립적으로 실행됨. 독립 되어있다는 것은, 다른 프로세스에게 영향을 받지 않는다는 것 (스레드는 프로세스 안에서 자원을 공유하므로 서로 영향)

이런 독립적 구조를 가진 **프로세스 간의 통신**을 수행해야 하는 상황이 있을 수 있음 => **IPC 통신**

프로세스 커널이 제공하는 IPC 설비를 이용해 프로세스간 통신을 할 수 있음

_*[커널이란?](https://minkwon4.tistory.com/295)_
운영체제 중 항상 메모리에 올라가 있는 운영체제의 핵심 부분으로써 하드웨어와 응용 프로그램 사이에서 인터페이스를 제공하는 역할을 하며 컴퓨터 자원들을 관리하는 역할을 한다. 즉, 커널은 인터페이스로써 응용 프로그램 수행에 필요한 여러가지 서비스를 제공하고 여러가지 하드웨어(CPU, 메모리) 등의 리소스를 관리하는 역할을 한다.

## IPC 종류
IPC 설비 종류도 여러가지가 있음. 필요에 따라 선택해서 사용

1. 익명 PIPE
- 파이프는 두 개의 프로세스를 연결. 하나의 프로세스는 데이터를 쓰기만 하고, 다른 하나는 데이터를 읽기만 함
- **한쪽 방향으로만 통신이 가능한 반이중 통신** -> 양쪽으로 모두 송/수신을 원하면 2개의 파이프를 만듦
- 장점 : 사용이 매우 간단. 단순한 데이터 흐름을 가질 땐 파이프를 사용하는 것이 효과적
- 단점 : 전이중 통신을 위해 2개를 만들어야 할 때는 구현이 복잡

2. Named PIPE (FIFO)
- 익명 파이프는 통신할 프로세스를 명확히 알 수 있는 경우에 사용(부모-자식 프로세스 간 통신처럼)하는 반면, Named 파이프는 전혀 모르는 상태의 프로세스들 사이의 통신에 사용됨
- 익명 파이프의 확장 상태. **부모 프로세스와 무관한 다른 프로세스도 통신이 가능**한 것 (통신을 위해 이름 있는 파일 사용)
- 하지만 Named 파이프 역시 읽기/쓰기 동시에 불가능함. 따라서 전이중 통신을 위해서는 익명 파이프와 마찬가지로 2개를 만들어야 가능

3. Message Queue
- 입출력 방식은 Named 파이프와 동일
- 데이터의 흐름(파이프)이 아닌 메모리 공간
- 사용할 데이터에 번호를 붙여 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있음

4. 공유 메모리
- 파이프, 메시지 큐가 통신을 이용한 설비라면, 공유 메모리는 **데이터 자체를 공유하도록 지원하는 설비**
- **프로세스간 메모리 영역을 공유해서 사용할 수 있도록** 허용해줌 (스레드처럼)
- 프로세스가 공유 메모리 할당을 커널에 요청하면 커널은 해당 프로세스에 메모리 공간을 할당해주고, 이후 모든 프로세스는 해당 메모리 영역에 접근할 수 있게 됨
  - **중계자 없이 곧바로 메모리에 접근할 수 있어 IPC 중 가장 빠르게 작동**

5. 메모리 맵
- 메모리 공유. **열린 파일을 메모리에 맵핑시켜서 공유**하는 방식 (즉, 공유 매개체가 파일+메모리)
- 주로 파일로 대용량 데이터를 공유해야 할 때 사용

6. 소켓
- 네트워크 소켓 통신을 통해 데이터 공유
- 클라이언트와 서버가 소켓을 통해 통신하는 구조, 원격에서 프로세스 간 데이터를 공유할 때 사용
- 서버(bind, listen, accept), 클라이언트(connect)

이러한 IPC 통신에서 프로세스 간 데이터를 동기화하고 보호하기 위해 [세마포어와 뮤텍스](https://heeonii.tistory.com/14)를 사용 (공유된 자원에 한번에 하나의 프로세스만 접근시킬 때)


#### 참고
<https://gyoogle.dev/blog/computer-science/operating-system/IPC.html>